<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For {{ recipient }} ‚ù§Ô∏è</title>
    <style>
        body { margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; overflow: hidden; }
        .card { padding: 20px; max-width: 600px; width: 90%; }
        h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .main-photo { max-width: 100%; max-height: 300px; border-radius: 15px; margin-bottom: 20px; object-fit: cover; }
        .btn-box { display: flex; gap: 20px; justify-content: center; margin-top: 20px; }
        button { padding: 15px 35px; font-size: 1.2rem; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; }
        .btn-yes { background-color: #2b9348; color: white; }
        .btn-no { background-color: #d90429; color: white; }
        body.playful { background-color: #fff0f3; font-family: 'Comic Sans MS', cursive; }
        body.romantic { background-color: #ffe5ec; font-family: 'Georgia', serif; }
        body.minimal { background-color: #ffffff; font-family: sans-serif; }
        .hidden { display: none; }
    </style>
</head>
<body class="{{ template }}">
    <div id="question-card" class="card">
        <h1>Will you be my Valentine? üåπ</h1>
        {% if photo %}
            <img src="{{ url_for('static', filename='uploads/' + photo) }}" class="main-photo">
        {% else %}
            <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" class="main-photo">
        {% endif %}
        <p>"{{ message }}"<br><small>- Love, {{ sender }}</small></p>
        <div class="btn-box">
            <button class="btn-yes" onclick="sayYes()">YES! üòç</button>
            <button class="btn-no" id="btn-no" onmouseover="runAway()">No üò¢</button>
        </div>
    </div>
    <div id="success-card" class="card hidden">
        <h1>YAY!!! üéâüíñ</h1>
        <p>I knew you'd say yes, {{ recipient }}!</p>
        {% if photo %}
            <img src="{{ url_for('static', filename='uploads/' + photo) }}" class="main-photo">
        {% else %}
            <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" class="main-photo">
        {% endif %}
    </div>
    <script>
        const template = "{{ template }}";
        const noBtn = document.getElementById('btn-no');
        function runAway() {
            if (template === 'playful') {
                const x = Math.random() * (window.innerWidth - 150);
                const y = Math.random() * (window.innerHeight - 100);
                noBtn.style.position = 'absolute';
                noBtn.style.left = x + 'px';
                noBtn.style.top = y + 'px';
            }
        }
        function sayYes() {
            document.getElementById('question-card').classList.add('hidden');
            document.getElementById('success-card').classList.remove('hidden');
        }
    </script>
</body>
</html>